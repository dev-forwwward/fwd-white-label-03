<!--
  FWD White Label — Webflow Custom Code Snippet
  ─────────────────────────────────────────────
  Paste this into: Webflow → Project Settings → Custom Code → Head Code

  SETUP:
  Load GSAP, ScrollTrigger, and jQuery from CDN *before* this snippet
  (Webflow already loads GSAP for Interactions — load ScrollTrigger separately if needed).

  HOW IT WORKS:
  Default: loads production bundle from jsDelivr CDN (all browsers, no setup needed).

  DEV MODE (per browser, per session):
  Open DevTools console on the Webflow site and run ONE of these:

    Chrome / localhost:
      localStorage.setItem('fwd-dev', 'https://localhost:5173')

    Firefox / Safari (requires a tunnel — see below):
      localStorage.setItem('fwd-dev', 'https://YOUR-TUNNEL-URL')

  To exit dev mode:
      localStorage.removeItem('fwd-dev')

  TUNNEL SETUP (Firefox & Safari):
  Install cloudflared:   brew install cloudflare/cloudflare/cloudflared
  Start tunnel:          cloudflared tunnel --url https://localhost:5173
  Copy the generated URL (e.g. https://abc-xyz.trycloudflare.com)
  Paste it into localStorage.setItem('fwd-dev', '...') above.

  FIRST-TIME LOCALHOST SETUP (Chrome):
  Visit https://localhost:5173 once → click Advanced → Proceed to trust the cert.
-->

<!-- Required externals — load BEFORE the loader below -->
<!-- Adjust versions as needed -->
<!-- <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script> -->

<!-- FWD White Label Loader -->
<script>
(function () {
  var CDN   = 'https://cdn.jsdelivr.net/gh/dev-forwwward/fwd-white-label-03@main/dist';
  var LOCAL = localStorage.getItem('fwd-dev'); // set via DevTools console to enable dev mode

  function addCSS(href) {
    var l = document.createElement('link');
    l.rel = 'stylesheet';
    l.href = href;
    document.head.appendChild(l);
  }

  function addJS(src, type) {
    var s = document.createElement('script');
    s.src = src;
    if (type) s.type = type;
    document.head.appendChild(s);
    return s;
  }

  function loadCDN() {
    addCSS(CDN + '/bundle.css');
    addJS(CDN + '/bundle.js');
  }

  if (LOCAL) {
    // Dev mode: load from local server or tunnel (HMR enabled)
    // Falls back to CDN if the server is not running
    var probe = addJS(LOCAL + '/@vite/client', 'module');
    probe.onload = function () {
      addJS(LOCAL + '/src/js/main.js', 'module');
    };
    probe.onerror = function () {
      console.warn('[FWD] Dev server not found at ' + LOCAL + ' — falling back to CDN.');
      loadCDN();
    };
  } else {
    // Production: load from CDN
    loadCDN();
  }
})();
</script>
